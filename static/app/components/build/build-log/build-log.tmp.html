<section class="buildlog">
    <div id="buildlog-top"></div>
    <header sticky sticky-class="buildlog-header-sticky" offset="50" class="buildlog-header">
        <div layout="row">
            <div flex layout="row" layout-align="start center" layout-padding>
                <div class="sticky-text" layout="row" layout-align="start center">
                    <buildstate status="$ctrl.build.buildstate"></buildstate>
                    <div class="buildlog-header-sticky-text">
                        <span ng-bind="$ctrl.build.sourcerepository.name"></span>
                        <span class="sticky-text" ng-bind="$ctrl.build.version"></span>
                    </div>
                </div>
            </div>
            <md-button ng-if="!$ctrl.logNotFound" class="md-icon-button" ng-click="$ctrl.scrollUp()">
                <ng-md-icon icon="keyboard_arrow_up"></ng-md-icon>
            </md-button>
            <md-button ng-if="!$ctrl.logNotFound" class="md-icon-button" ng-click="$ctrl.scrollDown()">
                <ng-md-icon icon="keyboard_arrow_down"></ng-md-icon>
            </md-button>
            <md-button ng-if="!$ctrl.logNotFound" target="_blank" href="/buildout/{{$ctrl.build.id}}/build.log">
                <ng-md-icon icon="sort"></ng-md-icon>
                <span>Raw log</span>
            </md-button>
        </div>
    </header>
    <div class="logs">
        <div ng-if="$ctrl.logNotFound" class="error-log-not-found" flex layout-padding layout="row" layout-align="center center">
            <ng-md-icon icon="warning" size="45"></ng-md-icon>
            <span>Log not found</span>
        </div>
        <md-progress-linear class="md-hue-1" md-mode="indeterminate" ng-if="$ctrl.isLoading" aria-label="Loading buildlog"></md-progress-linear>
        <pre layout="column" ansiup="$ctrl.logLines" ansiup-logline="$ctrl.logline" ansiup-on-linefocus-changed="$ctrl.updateState(value)"></pre>
    </div>
    <div id="buildlog-bottom"></div>
</section>